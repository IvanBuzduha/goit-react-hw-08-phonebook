(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{260:function(e,r,n){"use strict";n.r(r);var t=n(0),a=n(63),o=n(64),c=n(66),s=n(67),i=n(15),l=n(6),b=n(86),p=n.n(b),d=n(19),u=n(87),h=n(98),m=n.n(h),g=n(7),j="AIzaSyB5P3vDZ0h1pVPIC6Ws0p9Vv0hq89N8e1E",f=n(256),O=n(257),v=O.a().shape({email:O.b().email().required(),password:O.b().required("Enter correct password").min(6,"Min 6 symbols").max(12,"Max 12 Symbols").matches(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).{6,}$/,"passwordMatches")}),x=n(1),w=function(e){Object(c.a)(n,e);var r=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).state={},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"/registration"===this.props.location.pathname?"Registeration":"Login"}),Object(x.jsx)(f.d,{initialValues:{email:"",password:""},validationSchema:v,onSubmit:function(r){"/registration"===e.props.location.pathname?e.props.registerOperation(r):e.props.loginOperation(r)},children:function(r){var n=r.isSubmitting;return Object(x.jsx)(f.c,{children:"/registration"===e.props.location.pathname?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("label",{children:["Name:",Object(x.jsx)(f.b,{type:"text",name:"displayName",placeholder:"John Wick",className:"pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200 hover:outline-none hover:ring-0 hover:border-black border-gray-200"}),Object(x.jsx)(f.a,{name:"displayName",component:"div"})]}),Object(x.jsxs)("label",{children:["Email:",Object(x.jsx)(f.b,{type:"email",name:"email",placeholder:"johnwick@gmail.com",className:"pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200 hover:outline-none hover:ring-0 hover:border-black border-gray-200"}),Object(x.jsx)(f.a,{name:"email",component:"div"})]}),Object(x.jsxs)("label",{children:["Password:",Object(x.jsx)(f.b,{type:"password",name:"password",placeholder:"**********",className:"pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200 hover:outline-none hover:ring-0 hover:border-black border-gray-200"}),Object(x.jsx)(f.a,{name:"password",component:"div"})]}),Object(x.jsx)("button",{type:"submit",disabled:n,className:"w-full px-6 py-3 mt-3 text-lg text-white transition-all duration-150 ease-linear rounded-lg shadow outline-none bg-green-500 hover:bg-green-800 hover:shadow-lg focus:outline-none",children:"/registration"===e.props.location.pathname?"Sign up":"Sign in"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("label",{children:["Email:",Object(x.jsx)(f.b,{type:"email",name:"email",placeholder:"johnwick@gmail.com",className:"pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200 hover:outline-none hover:ring-0 hover:border-black border-gray-200"}),Object(x.jsx)(f.a,{name:"email",component:"div"})]}),Object(x.jsxs)("label",{children:["Password:",Object(x.jsx)(f.b,{type:"password",name:"password",placeholder:"**********",className:"pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200 hover:outline-none hover:ring-0 hover:border-black border-gray-200"}),Object(x.jsx)(f.a,{name:"password",component:"div"})]}),Object(x.jsx)("button",{type:"submit",disabled:n,className:"w-full px-6 py-3 mt-3 text-lg text-white transition-all duration-150 ease-linear rounded-lg shadow outline-none bg-green-500 hover:bg-green-800 hover:shadow-lg focus:outline-none",children:"/registration"===e.props.location.pathname?"Sign up":"Sign in"})]})})}})]})})}}]),n}(t.Component),k=Object(i.b)(null,{registerOperation:function(e){return function(){var r=Object(u.a)(p.a.mark((function r(n){var t,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Object(g.f)()),r.prev=1,r.next=4,m.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(j),Object(d.a)(Object(d.a)({},e),{},{returnSecureToken:!0}));case 4:t=r.sent,a=t.data,n(Object(g.g)(a)),m.a.post("https://phonebook-20-default-rtdb.firebaseio.com/users/".concat(a.localId,".json?auth=").concat(a.idToken),{email:e.email,role:"admin"}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n(Object(g.e)(r.t0.response.data.error.message));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},loginOperation:function(e){return function(){var r=Object(u.a)(p.a.mark((function r(n){var t,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Object(g.b)()),r.prev=1,r.next=4,m.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(j),Object(d.a)(Object(d.a)({},e),{},{returnSecureToken:!0}));case 4:t=r.sent,a=t.data,n(Object(g.c)(a)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),n(Object(g.a)(r.t0.response.data.error.message));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}})(Object(l.g)(w));r.default=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(k,{})})}}}]);
//# sourceMappingURL=AuthPage.3f773f90.chunk.js.map